// Java toolchain
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

jar {
    manifest {
        attributes('Automatic-Module-Name': 'com.leakyabstractions.result.core')
    }
}

// Configure java compiler
tasks.withType(JavaCompile).all {
    options.compilerArgs.addAll(['-Xlint:all', '-Werror'])
    if (name != 'compileTestJava') {
        options.release = 8
        // source value 8 is obsolete and will be removed in a future release
        options.compilerArgs.addAll(['-Xlint:-options'])
    }
}
